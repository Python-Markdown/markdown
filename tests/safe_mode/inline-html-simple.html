<p>Here's a simple block:</p>
<p>&lt;div&gt;
    foo
&lt;/div&gt;</p>
<p>This should be a code block, though:</p>
<pre><code>&lt;div&gt;
    foo
&lt;/div&gt;
</code></pre>
<p>As should this:</p>
<pre><code>&lt;div&gt;foo&lt;/div&gt;
</code></pre>
<p>Now, nested:</p>
<p>&lt;div&gt;
    &lt;div&gt;
        &lt;div&gt;
            foo
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</p>
<p>This should just be an HTML comment:</p>
<p>&lt;!-- Comment --&gt;</p>
<p>Multiline:</p>
<p>&lt;!--
Blah
Blah
--&gt;</p>
<p>Code block:</p>
<pre><code>&lt;!-- Comment --&gt;
</code></pre>
<p>Just plain comment, with trailing spaces on the line:</p>
<p>&lt;!-- foo --&gt; <br />
</p>
<p>Code:</p>
<pre><code>&lt;hr /&gt;
</code></pre>
<p>Hr's:</p>
<p>&lt;hr&gt;</p>
<p>&lt;hr/&gt;</p>
<p>&lt;hr /&gt;</p>
<p>&lt;hr&gt; <br />
</p>
<p>&lt;hr/&gt;<br />
</p>
<p>&lt;hr /&gt; </p>
<p>&lt;hr class="foo" id="bar" /&gt;</p>
<p>&lt;hr class="foo" id="bar"/&gt;</p>
<p>&lt;hr class="foo" id="bar" &gt;</p>
<p>&lt;some <a href="http://example.com">weird</a> stuff&gt;</p>